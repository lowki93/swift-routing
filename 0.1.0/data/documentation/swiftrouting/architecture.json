{"abstract":[{"type":"text","text":"Understand the design principles and structure behind SwiftRouting."}],"topicSections":[{"title":"Related","identifiers":["doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouterModel","doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/TabRouter","doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RoutingView"],"anchor":"Related"}],"metadata":{"title":"Architecture","roleHeading":"API Collection","modules":[{"name":"SwiftRouting"}],"role":"collectionGroup"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"text":"SwiftRouting is built around a few core principles: ","type":"text"},{"inlineContent":[{"text":"separation of concerns","type":"text"}],"type":"strong"},{"text":", ","type":"text"},{"inlineContent":[{"type":"text","text":"type safety"}],"type":"strong"},{"text":", and ","type":"text"},{"inlineContent":[{"text":"testability","type":"text"}],"type":"strong"},{"text":". This guide explains how these principles shape the framework’s architecture.","type":"text"}],"type":"paragraph"},{"anchor":"Design-Principles","level":2,"text":"Design Principles","type":"heading"},{"anchor":"Routes-Are-Data-Not-Views","level":3,"text":"Routes Are Data, Not Views","type":"heading"},{"inlineContent":[{"type":"text","text":"In SwiftRouting, routes are simple Swift enums that describe "},{"inlineContent":[{"text":"what","type":"text"}],"type":"emphasis"},{"type":"text","text":" destination to navigate to, not "},{"inlineContent":[{"type":"text","text":"how"}],"type":"emphasis"},{"type":"text","text":" to display it:"}],"type":"paragraph"},{"code":["enum AppRoute: Route {","    case home","    case profile(userId: String)","    case settings","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"The view mapping is handled separately through ","type":"text"},{"type":"codeVoice","code":"RouteDestination"},{"text":":","type":"text"}],"type":"paragraph"},{"code":["extension AppRoute: RouteDestination {","    static func view(for route: AppRoute) -> some View {","        switch route {","        case .home: HomeView()","        case .profile(let userId): ProfileView(userId: userId)","        case .settings: SettingsView()","        }","    }","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Why this separation?","type":"text"}]}],"type":"paragraph"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Benefit"}]}],[{"inlineContent":[{"text":"Explanation","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reusability"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Routes can be used in navigation, deep links, analytics, and tests without view dependencies"}],"type":"paragraph"}]],[[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Testability"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Test navigation logic by asserting on route values, not view hierarchies","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Flexibility","type":"text"}]}],"type":"paragraph"}],[{"inlineContent":[{"text":"Change view implementations without touching route definitions","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"inlineContent":[{"text":"Modularity","type":"text"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Routes can live in a shared module; views in feature modules","type":"text"}],"type":"paragraph"}]]],"type":"table"},{"anchor":"Protocol-Based-Router","level":3,"text":"Protocol-Based Router","type":"heading"},{"inlineContent":[{"text":"The ","type":"text"},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","type":"reference","isActive":true},{"text":" class implements the ","type":"text"},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouterModel","type":"reference","isActive":true},{"text":" protocol, which defines all navigation operations:","type":"text"}],"type":"paragraph"},{"code":["public protocol RouterModel {","    func push(_ route: some Route)","    func present(_ route: some Route, withStack: Bool)","    func cover(_ route: some Route)","    func back()","    func popToRoot()","    func close()","    \/\/ ...","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"This protocol-based design enables:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Dependency injection","type":"text"}]},{"text":" in ViewModels","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Mocking"}]},{"type":"text","text":" for unit tests"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Abstraction"}]},{"type":"text","text":" over concrete router implementations"}]}]}],"type":"unorderedList"},{"anchor":"Hierarchical-Router-Structure","level":3,"text":"Hierarchical Router Structure","type":"heading"},{"inlineContent":[{"type":"text","text":"SwiftRouting creates a hierarchy of routers that mirrors your navigation structure:"}],"type":"paragraph"},{"code":["App","└── TabRouter (manages tab selection)","    ├── Router [Home Tab]","    │   └── Router [Presented Sheet]","    ├── Router [Search Tab]","    └── Router [Profile Tab]"],"syntax":null,"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Each "},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RoutingView","type":"reference","isActive":true},{"type":"text","text":" creates its own "},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","type":"reference","isActive":true},{"type":"text","text":". When you present a sheet or cover, a new child router is created. This hierarchy enables:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Scoped navigation","type":"text"}],"type":"strong"},{"text":": Each router manages its own stack","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Context propagation","type":"text"}]},{"type":"text","text":": "},{"type":"codeVoice","code":"RouteContext"},{"type":"text","text":" flows up through the hierarchy"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Coordinated dismissal"}],"type":"strong"},{"text":": ","type":"text"},{"code":"closeChildren()","type":"codeVoice"},{"text":" dismisses all descendants","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"Component-Relationships","level":2,"text":"Component Relationships","type":"heading"},{"anchor":"RoutingView","level":3,"text":"RoutingView","type":"heading"},{"inlineContent":[{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RoutingView","type":"reference","isActive":true},{"type":"text","text":" is the entry point that creates a "},{"type":"codeVoice","code":"NavigationStack"},{"type":"text","text":" with an associated "},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","type":"reference","isActive":true},{"type":"text","text":":"}],"type":"paragraph"},{"code":["RoutingView(destination: AppRoute.self, root: .home)"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"It:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Creates a ","type":"text"},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","type":"reference","isActive":true},{"text":" instance","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Injects it into the environment via "},{"code":"@Environment(\\.router)","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Registers the "},{"type":"codeVoice","code":"RouteDestination"},{"type":"text","text":" for navigation"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Manages sheet and cover presentations"}],"type":"paragraph"}]}],"type":"orderedList"},{"anchor":"Router","level":3,"text":"Router","type":"heading"},{"inlineContent":[{"type":"text","text":"The "},{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","type":"reference","isActive":true},{"type":"text","text":" manages:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Navigation path"}],"type":"strong"},{"type":"text","text":": The stack of pushed routes"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Root route","type":"text"}],"type":"strong"},{"text":": The initial route displayed","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Presentations","type":"text"}],"type":"strong"},{"text":": Sheet and cover modals","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Context observers","type":"text"}],"type":"strong"},{"text":": Registered ","type":"text"},{"code":"RouteContext","type":"codeVoice"},{"text":" handlers","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Child routers"}]},{"text":": Routers created by presented modals","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"TabRouter","level":3,"text":"TabRouter","type":"heading"},{"inlineContent":[{"type":"reference","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/TabRouter","isActive":true},{"type":"text","text":" coordinates navigation across tabs:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Manages the selected tab"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Provides access to each tab’s "},{"type":"reference","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","isActive":true}]}]},{"content":[{"inlineContent":[{"text":"Enables cross-tab navigation (","type":"text"},{"type":"codeVoice","code":"push(_:in:)"},{"text":", ","type":"text"},{"type":"codeVoice","code":"popToRoot(in:)"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Handles tab-aware deep links","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Data-Flow","level":2,"text":"Data Flow","type":"heading"},{"anchor":"Navigation-Flow","level":3,"text":"Navigation Flow","type":"heading"},{"code":["User Action → Router Method → State Update → SwiftUI Renders","     │              │              │","     │              │              └── @Published properties trigger view updates","     │              └── push(), present(), back(), etc.","     └── Button tap, deep link, programmatic call"],"syntax":null,"type":"codeListing"},{"anchor":"Context-Flow","level":3,"text":"Context Flow","type":"heading"},{"inlineContent":[{"type":"codeVoice","code":"RouteContext"},{"type":"text","text":" flows upward through the router hierarchy:"}],"type":"paragraph"},{"code":["Child Router                    Parent Router","     │                               │","     │ router.terminate(context) ────▶│ .routerContext handler executes","     │                               │","     │◀──── Navigation completes ────│"],"syntax":null,"type":"codeListing"},{"anchor":"Deep-Link-Flow","level":3,"text":"Deep Link Flow","type":"heading"},{"code":["URL\/Identifier → DeeplinkHandler → DeeplinkRoute → Router.handle(deeplink:)","                      │                  │                   │","                      │                  │                   └── Executes navigation sequence","                      │                  └── Factory creates navigation instructions","                      └── Async conversion with optional data fetching"],"syntax":null,"type":"codeListing"},{"anchor":"Memory-Management","level":2,"text":"Memory Management","type":"heading"},{"anchor":"Router-Lifecycle","level":3,"text":"Router Lifecycle","type":"heading"},{"inlineContent":[{"type":"text","text":"Routers are retained by their parent "},{"code":"RoutingView","type":"codeVoice"},{"type":"text","text":". When a view is dismissed:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The router is deallocated","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Context observers are automatically cleaned up","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Child routers are released","type":"text"}]}]}],"type":"orderedList"},{"anchor":"Context-Cleanup","level":3,"text":"Context Cleanup","type":"heading"},{"inlineContent":[{"type":"text","text":"Context observers registered on a route are automatically removed when that route is popped from the stack. This prevents memory leaks and stale callbacks."}],"type":"paragraph"},{"code":["\/\/ Observer registered on .list route","router.push(.list)","router.add(context: SelectionContext.self) { ... }","","\/\/ When .list is popped, the observer is automatically removed","router.back()"],"syntax":"swift","type":"codeListing"},{"anchor":"Best-Practices","level":2,"text":"Best Practices","type":"heading"},{"anchor":"Keep-Routes-Focused","level":3,"text":"Keep Routes Focused","type":"heading"},{"inlineContent":[{"type":"text","text":"One route enum per feature or navigation context:"}],"type":"paragraph"},{"code":["\/\/ Good: Focused route enums","enum HomeRoute: Route { ... }","enum ProfileRoute: Route { ... }","enum SettingsRoute: Route { ... }","","\/\/ Avoid: One massive enum for everything","enum AppRoute: Route {","    case home, homeDetail, homeSettings, profile, profileEdit, ...","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Use-Nested-Routes-for-Complex-Hierarchies","level":3,"text":"Use Nested Routes for Complex Hierarchies","type":"heading"},{"code":["enum AppRoute: Route {","    case home","    case profile(ProfileRoute)","    case settings(SettingsRoute)","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Inject-RouterModel-Not-Router","level":3,"text":"Inject RouterModel, Not Router","type":"heading"},{"inlineContent":[{"type":"text","text":"In ViewModels, depend on the protocol for testability:"}],"type":"paragraph"},{"code":["class MyViewModel {","    private let router: any RouterModel","    ","    init(router: any RouterModel) {","        self.router = router","    }","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Prefer-terminate-Over-Manual-Navigation","level":3,"text":"Prefer terminate() Over Manual Navigation","type":"heading"},{"inlineContent":[{"text":"When completing a flow with context, use ","type":"text"},{"code":"terminate()","type":"codeVoice"},{"text":" instead of manual ","type":"text"},{"code":"back()","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"close()","type":"codeVoice"},{"text":":","type":"text"}],"type":"paragraph"},{"code":["\/\/ Good: Let the framework handle navigation","router.terminate(SelectionContext(item: selectedItem))","","\/\/ Avoid: Manual navigation after context","router.context(SelectionContext(item: selectedItem))","router.back() \/\/ or router.close()"],"syntax":"swift","type":"codeListing"}]}],"sections":[],"seeAlsoSections":[{"title":"Architecture and Testing","identifiers":["doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Testing"],"generated":true,"anchor":"Architecture-and-Testing"}],"variants":[{"paths":["\/documentation\/swiftrouting\/architecture"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Architecture","interfaceLanguage":"swift"},"schemaVersion":{"major":0,"minor":3,"patch":0},"kind":"article","hierarchy":{"paths":[["doc:\/\/SwiftRouting\/documentation\/SwiftRouting"]]},"references":{"doc://SwiftRouting/documentation/SwiftRouting/Router":{"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Router","title":"Router","navigatorTitle":[{"kind":"identifier","text":"Router"}],"url":"\/documentation\/swiftrouting\/router","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Router"}],"abstract":[{"text":"Every ","type":"text"},{"code":"RoutingView","type":"codeVoice"},{"text":" has his own router","type":"text"}],"type":"topic"},"doc://SwiftRouting/documentation/SwiftRouting/Testing":{"type":"topic","url":"\/documentation\/swiftrouting\/testing","role":"collectionGroup","title":"Testing Navigation","abstract":[{"type":"text","text":"Learn how to write unit tests for your navigation logic."}],"kind":"article","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/Testing"},"doc://SwiftRouting/documentation/SwiftRouting/RouterModel":{"url":"\/documentation\/swiftrouting\/routermodel","kind":"symbol","title":"RouterModel","type":"topic","navigatorTitle":[{"text":"RouterModel","kind":"identifier"}],"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouterModel","abstract":[{"type":"text","text":"Defines navigation capabilities within a "},{"type":"codeVoice","code":"ViewModel"},{"type":"text","text":" or other components."}],"role":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RouterModel","kind":"identifier"}]},"doc://SwiftRouting/documentation/SwiftRouting/TabRouter":{"title":"TabRouter","type":"topic","navigatorTitle":[{"text":"TabRouter","kind":"identifier"}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TabRouter","kind":"identifier"}],"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/TabRouter","url":"\/documentation\/swiftrouting\/tabrouter","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"A router managing navigation within a "},{"type":"codeVoice","code":"RoutingTabView"},{"type":"text","text":"."}]},"doc://SwiftRouting/documentation/SwiftRouting":{"title":"SwiftRouting","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting","abstract":[{"text":"A lightweight, type-safe navigation framework built on top of NavigationStack for SwiftUI.","type":"text"}],"kind":"symbol","role":"collection","url":"\/documentation\/swiftrouting","type":"topic"},"doc://SwiftRouting/documentation/SwiftRouting/RoutingView":{"title":"RoutingView","abstract":[{"type":"text","text":"Creates a navigation container with its own "},{"type":"codeVoice","code":"Router"},{"type":"text","text":"."}],"type":"topic","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RoutingView","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RoutingView","kind":"identifier"}],"navigatorTitle":[{"text":"RoutingView","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/swiftrouting\/routingview","role":"symbol"}}}