{"abstract":[{"type":"text","text":"Learn how to pass data between routes using RouteContext."}],"seeAlsoSections":[{"title":"Route Context","identifiers":[],"generated":true,"anchor":"Route-Context"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"role":"article","roleHeading":"Article","modules":[{"name":"SwiftRouting"}],"title":"Route Context"},"sections":[],"primaryContentSections":[{"content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouteContext"},{"type":"text","text":" enables communication from child routes back to parent routes. Use it to pass selection results, form data, or completion signals up the navigation hierarchy."}]},{"anchor":"What-is-RouteContext","type":"heading","level":2,"text":"What is RouteContext?"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"type":"codeVoice","code":"RouteContext"},{"type":"text","text":" is any type conforming to "},{"type":"codeVoice","code":"Hashable & Sendable"},{"type":"text","text":". It acts as a message that can be sent from a child route and received by any ancestor route that registered an observer."}]},{"code":["struct UserSelectionContext: RouteContext {","    let selectedUser: User","}","","struct FormCompletionContext: RouteContext {","    let formData: FormData","    let success: Bool","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Registering-Context-Observers","type":"heading","level":2,"text":"Registering Context Observers"},{"anchor":"Using-the-View-Modifier","type":"heading","level":3,"text":"Using the View Modifier"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The simplest way to observe contexts is with the "},{"type":"codeVoice","code":"routerContext"},{"type":"text","text":" modifier:"}]},{"code":["struct ParentView: View {","    @State private var selectedUser: User?","    ","    var body: some View {","        ContentView()","            .routerContext(UserSelectionContext.self) { [weak self] context in","                self?.selectedUser = context.selectedUser","            }","    }","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Using-Router-Directly","type":"heading","level":3,"text":"Using Router Directly"},{"type":"paragraph","inlineContent":[{"text":"You can also register observers directly on the router:","type":"text"}]},{"code":["struct ParentView: View {","    @Environment(\\.router) private var router","    @State private var selectedUser: User?","    ","    var body: some View {","        ContentView()","            .onAppear {","                router.add(context: UserSelectionContext.self) { [weak self] context in","                    self?.selectedUser = context.selectedUser","                }","            }","    }","}"],"syntax":"swift","type":"codeListing"},{"name":"Warning","type":"aside","content":[{"inlineContent":[{"type":"text","text":"Always capture "},{"type":"codeVoice","code":"self"},{"type":"text","text":" or view models with "},{"type":"codeVoice","code":"[weak self]"},{"type":"text","text":" to prevent memory leaks."}],"type":"paragraph"}],"style":"warning"},{"type":"heading","level":2,"text":"Sending Context","anchor":"Sending-Context"},{"type":"paragraph","inlineContent":[{"type":"text","text":"From a child route, send context using "},{"type":"codeVoice","code":"context(_:)"},{"type":"text","text":" or "},{"type":"codeVoice","code":"terminate(_:)"},{"type":"text","text":":"}]},{"type":"heading","level":3,"text":"context(_:) - Send Without Navigation","anchor":"context-Send-Without-Navigation"},{"type":"paragraph","inlineContent":[{"text":"Sends the context to all observers without affecting navigation:","type":"text"}]},{"code":["struct UserPickerView: View {","    @Environment(\\.router) private var router","    let users: [User]","    ","    var body: some View {","        List(users) { user in","            Button(user.name) {","                \/\/ Send context but stay on this screen","                router.context(UserSelectionContext(selectedUser: user))","            }","        }","    }","}"],"type":"codeListing","syntax":"swift"},{"level":3,"type":"heading","anchor":"terminate-Send-and-Navigate-Back","text":"terminate(_:) - Send and Navigate Back"},{"inlineContent":[{"text":"Sends the context and navigates back to the observer’s route:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["struct UserPickerView: View {","    @Environment(\\.router) private var router","    let users: [User]","    ","    var body: some View {","        List(users) { user in","            Button(user.name) {","                \/\/ Send context AND navigate back","                router.terminate(UserSelectionContext(selectedUser: user))","            }","        }","    }","}"]},{"inlineContent":[{"code":"terminate(_:)","type":"codeVoice"},{"text":" will:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Execute all matching context observers","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Pop routes back to where the context was registered"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Or close the modal if presented"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Or go back one step if no matching context is found"}],"type":"paragraph"}]}],"type":"orderedList"},{"text":"Context Hierarchy","anchor":"Context-Hierarchy","type":"heading","level":2},{"inlineContent":[{"text":"Contexts propagate up through the entire router hierarchy:","type":"text"}],"type":"paragraph"},{"syntax":null,"type":"codeListing","code":["App Router","    └── Tab Router","            └── Home Router (observer registered here)","                    └── List Router","                            └── Detail Router (context sent from here)"]},{"inlineContent":[{"text":"When context is sent from Detail Router, it reaches the observer in Home Router.","type":"text"}],"type":"paragraph"},{"anchor":"Removing-Observers","type":"heading","level":2,"text":"Removing Observers"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Observers are automatically removed when their route is popped. You can also remove them manually:"}]},{"type":"codeListing","code":["router.remove(context: UserSelectionContext.self)"],"syntax":"swift"},{"type":"heading","anchor":"Common-Patterns","text":"Common Patterns","level":2},{"type":"heading","anchor":"Selection-Flow","text":"Selection Flow","level":3},{"code":["\/\/ Parent: Start selection","router.push(HomeRoute.userPicker)","","\/\/ Parent: Receive selection",".routerContext(UserSelectionContext.self) { context in","    selectedUser = context.selectedUser","}","","\/\/ Child: Complete selection","router.terminate(UserSelectionContext(selectedUser: user))"],"type":"codeListing","syntax":"swift"},{"anchor":"Form-Completion","type":"heading","level":3,"text":"Form Completion"},{"code":["\/\/ Parent",".routerContext(FormCompletionContext.self) { context in","    if context.success {","        showSuccessMessage()","    }","}","","\/\/ Child (form view)","func submitForm() async {","    let success = await api.submit(formData)","    router.terminate(FormCompletionContext(formData: formData, success: success))","}"],"type":"codeListing","syntax":"swift"},{"anchor":"Multi-Step-Wizard","type":"heading","level":3,"text":"Multi-Step Wizard"},{"code":["struct WizardContext: RouteContext {","    let step: Int","    let data: WizardData","}","","\/\/ Each step sends progress","router.context(WizardContext(step: currentStep, data: collectedData))","","\/\/ Final step terminates","router.terminate(WizardContext(step: finalStep, data: completeData))"],"type":"codeListing","syntax":"swift"},{"anchor":"Memory-Management","type":"heading","level":2,"text":"Memory Management"},{"inlineContent":[{"type":"text","text":"Context closures can cause retain cycles. Always use weak references:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ ✅ Correct","router.add(context: MyContext.self) { [weak self] context in","    self?.handleContext(context)","}","","\/\/ ✅ Correct with view model",".routerContext(MyContext.self) { [weak viewModel] context in","    viewModel?.process(context)","}","","\/\/ ❌ Wrong - causes retain cycle","router.add(context: MyContext.self) { context in","    self.handleContext(context)  \/\/ Strong reference to self","}"]}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouteContext"},"hierarchy":{"paths":[["doc:\/\/SwiftRouting\/documentation\/SwiftRouting"]]},"variants":[{"paths":["\/documentation\/swiftrouting\/routecontext"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","references":{"doc://SwiftRouting/documentation/SwiftRouting/RouteContext":{"type":"topic","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting\/RouteContext","url":"\/documentation\/swiftrouting\/routecontext","title":"Route Context","abstract":[{"text":"Learn how to pass data between routes using RouteContext.","type":"text"}],"role":"article","kind":"article"},"doc://SwiftRouting/documentation/SwiftRouting":{"type":"topic","title":"SwiftRouting","url":"\/documentation\/swiftrouting","identifier":"doc:\/\/SwiftRouting\/documentation\/SwiftRouting","role":"collection","kind":"symbol","abstract":[{"type":"text","text":"A lightweight, flexible navigation framework built on top of NavigationStack for SwiftUI."}]}}}